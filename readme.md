

---

# VirtualShell

`VirtualShell` — это симулированный командный интерпретатор, позволяющий работать с виртуальной файловой системой, предварительно загруженной из архива. Эта программа предназначена для выполнения базовых команд оболочки, таких как `ls`, `cd`, `pwd`, `touch`, и ведет логирование всех действий пользователя.

## Установка

### Требования
- Python 3.x
- Модуль `pytest` для тестирования

### Установка
1. Склонируйте репозиторий или загрузите архив с кодом.
2. Убедитесь, что у вас есть скомпилированный файл `virtual_fs.tar`, содержащий вашу виртуальную файловую систему.

## Структура виртуальной файловой системы

Ваша виртуальная файловая система имеет следующую структуру, которая должна быть упакована в `virtual_fs.tar`:

```
./
./dir1/
./dir2/
./dir3/
./dir3/file1.txt
./dir3/file2.log
./dir2/subdir1/
./dir2/subdir1/file4.md
./dir1/file3.txt
```

## Использование

`VirtualShell` предоставляет следующие команды:

- `ls`: Список содержимого текущей директории.
- `cd [путь]`: Изменение текущей директории на заданную. Можно использовать относительные и абсолютные пути.
- `pwd`: Печатает текущий путь.
- `touch [имя_файла]`: Создаёт пустой файл в текущей директории.
- `exit`: Завершает сессию и сохраняет журнал действий.

### Пример использования

```python
from virtual_shell import VirtualShell

# Создайте экземпляр VirtualShell
shell = VirtualShell('virtual_fs.tar', 'log.json')

# Показать содержимое корневой директории
print(shell.ls())

# Перейти в директорию dir1
shell.cd('dir1')
print(shell.pwd())

# Показать содержимое dir1
print(shell.ls())

# Создать новый файл в dir1
shell.touch('newfile.txt')

# Вернуться в корневую директорию
shell.cd('/')
print(shell.pwd())

# Сохранить журнал действий и выйти
shell.exit()
```

## Тестирование

### Установка `pytest`

Для установки `pytest` выполните следующую команду:

```bash
pip install pytest
```

### Запуск тестов

Для запуска тестов используйте:

```bash
pytest
```

### Описание тестов

Тесты находятся в файле `test_virtual_shell.py` и проверяют функциональные возможности команд оболочки:

- `test_ls`: Проверяет, что команды `ls` возвращают корректное содержимое текущей директории.
- `test_cd`: Проверяет корректность изменений директории с использованием `cd`.
- `test_pwd`: Проверяет команду `pwd` на вывод правильного пути.
- `test_touch`: Тестирует создание нового файла в текущей директории.

## Логирование

Программа ведет журнал всех действий. Лог сохраняется в файле `log.json` в формате JSON со следующей структурой:

```json
[
    {
        "action": "ls in /",
        "timestamp": "2024-05-13T12:34:56.789123"
    },
    {
        "action": "cd to /dir1",
        "timestamp": "2024-05-13T12:35:10.123456"
    },
    ...
]
```

## Автор

Разработчик: [Даниил Сысоев]

---

### Примечания

- Убедитесь, что `virtual_fs.tar` находится в той же директории, где вы запускаете скрипт, или укажите полный путь до него.
- Директория для извлечения архива должна быть доступна для записи в вашей системе.
